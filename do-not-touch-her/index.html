<!DOCTYPE html>
<html>
	<header>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.2, maximum-scale=5.0, user-scalable=yes">
		<title>DON'T TOUCH HER</title>
		<style>
			* {
				font-family: 'Cascadia Code', Arial, sans-serif;
			}
		</style>
	</header>

	<body>
		<h1 id="statusbar">Initializing ...</h1>
		<p>
			<strong>Acceleration:</strong>
			<br><span id="accelerationWithoutGravity"></span>
		</p>
		<audio id="audio_control" src="track0.mp3" preload="auto" controls></audio>

		<script>
			var statusbar = document.getElementById("statusbar");
			var audio_control = document.getElementById("audio_control");
			var track_list = new Array("track0.mp3", "track1.mp3");
			var current_index = 0;
			if (window.DeviceMotionEvent) {
				setTimeout(() => {
					window.addEventListener('devicemotion', function (event) {
						var accelerationWithoutGravity = event.acceleration;
						var x_acceleration = accelerationWithoutGravity.x;
						var y_acceleration = accelerationWithoutGravity.y;
						var z_acceleration = accelerationWithoutGravity.z;
						document.getElementById("accelerationWithoutGravity").innerText = "x: " + x_acceleration + "m/sÂ², " + "\ny: " + y_acceleration + "m/sÂ², " + "\nz: " + z_acceleration + "m/sÂ²";
						if (x_acceleration > 1 || y_acceleration > 1 || z_acceleration > 1) {
							statusbar.innerText = "Growlman is growling! ðŸ˜ ";
							if (audio_control.ended || current_index == 0) {
								var current_position = (current_index) % track_list.length;
								audio_control.src = track_list[current_position];
								audio_control.play();
								if (current_position == track_list.length - 1) {
									window.navigator.vibrate(6000);
								}
								current_index++;
							}
						} else {
							statusbar.innerText = "Growlman is Stable. ðŸ˜€";
						}
					}, false);
				}, 2000);
			} else {
				alert("Your Device do not support DeviceMotion Event!");
			}
		</script>
	</body>
</html>
